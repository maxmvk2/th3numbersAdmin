(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{uibO:function(e,t,i){"use strict";i.r(t);var o=i("ofXK"),n=i("PCNd"),s=i("tyNb"),d=i("pKmL"),a=i("o0su"),r=i("3Pt+"),c=i("fXoL"),p=i("dNgK"),l=i("Xa2L"),h=i("bTqV"),m=i("kmnG"),g=i("qFsG"),u=i("ihCf"),b=i("mrSG"),f=(i("VHTt"),i("bYFv")),w=i("iadO"),P=i("NFeN");const C=["rteNotes"];function O(e,t){if(1&e){const e=c.Ub();c.Tb(0,"button",25),c.bc("click",(function(t){return c.rc(e),c.fc().updateEpisode()})),c.zc(1," Update Episode "),c.Sb()}if(2&e){const e=c.fc();c.kc("disabled",e.editEpisodeForm.invalid||!e.showEpisodeButton())}}function v(e,t){if(1&e){const e=c.Ub();c.Tb(0,"button",25),c.bc("click",(function(t){return c.rc(e),c.fc().saveEpisode()})),c.zc(1," Create Episode "),c.Sb()}if(2&e){const e=c.fc();c.kc("disabled",e.editEpisodeForm.invalid)}}function I(e,t){if(1&e){const e=c.Ub();c.Tb(0,"button",26),c.bc("click",(function(t){return c.rc(e),c.fc().deleteEpisode()})),c.zc(1," Delete Episode "),c.Sb()}}function M(e,t){if(1&e){const e=c.Ub();c.Tb(0,"button",26),c.bc("click",(function(t){return c.rc(e),c.fc().cancelEpisode()})),c.zc(1," Cancel "),c.Sb()}}function k(e,t){if(1&e){const e=c.Ub();c.Tb(0,"div",27),c.Tb(1,"button",26),c.bc("click",(function(i){c.rc(e);const o=t.$implicit;return c.fc().deleteEpisodeImage(o)})),c.zc(2,"Delete image"),c.Sb(),c.Pb(3,"img",28),c.Sb()}if(2&e){const e=t.$implicit;c.Bb(3),c.kc("src",e.url,c.tc)}}let _=(()=>{class e{constructor(e,t,i,o,n){this.formBuilder=e,this.changeDetector=t,this.imagesService=i,this.audioService=o,this.pdfService=n,this.savedEpisode=new c.n,this.updatedEpisode=new c.n,this.deletedEpisode=new c.n,this.deletedImage=new c.n,this.deletedAudio=new c.n,this.deletedPDF=new c.n,this.canceledEpisode=new c.n,this.routeAnimationsElements=d.c,this.episodeImages=[],this.tools={items:["CreateLink"]}}ngOnInit(){this.editEpisodeForm=this.formBuilder.group({title:[this.episode.title,r.p.required],number:[this.episode.number,r.p.required],date:this.episode.date,author:this.episode.author,audio:this.episode.audio,pdf:this.episode.pdf}),this.episodeInfo=this.episode.info,this.episodeImages=this.episode.images}showEpisodeButton(){return Boolean(this.formEpisodeInput.number.value!==this.episode.number||this.formEpisodeInput.title.value!==this.episode.title||this.formEpisodeInput.date.value!==this.episode.date||this.formEpisodeInput.author.value!==this.episode.author||this.formEpisodeInput.audio.value!==this.episode.audio||this.formEpisodeInput.pdf.value!==this.episode.pdf||this.episodeInfo!==this.episode.info||JSON.stringify(this.episodeImages)!==JSON.stringify(this.episode.images))}get formEpisodeInput(){return this.editEpisodeForm.controls}saveEpisode(){return Object(b.b)(this,void 0,void 0,(function*(){this.episode.number=this.formEpisodeInput.number.value,this.episode.title=this.formEpisodeInput.title.value,this.episode.date=this.formEpisodeInput.date.value,this.episode.author=this.formEpisodeInput.author.value,this.episode.info=this.rteObj.getHtml(),this.episode.audio=this.formEpisodeInput.audio.value,this.episode.pdf=this.formEpisodeInput.pdf.value,this.episode.id=Math.random(),this.episodeInfo=this.episode.info,this.episodeImages=this.episode.images,this.episode.images?this.episode.images&&Promise.all(this.episode.images.map(e=>Object(b.b)(this,void 0,void 0,(function*(){if(e.file&&null===e.url.match("res.cloudinary.com")){const t=yield this.imagesService.uploadImage(e.file).toPromise();e.url=t.data.uploadImage}})))).then(()=>{this.episode.imageUrls=[...this.episode.images.map(e=>e.url)],this.savedEpisode.emit(this.episode)}):this.savedEpisode.emit(this.episode)}))}updateEpisode(){return Object(b.b)(this,void 0,void 0,(function*(){this.episode.number=this.formEpisodeInput.number.value,this.episode.title=this.formEpisodeInput.title.value,this.episode.date=this.formEpisodeInput.date.value,this.episode.author=this.formEpisodeInput.author.value,this.episode.audio=this.formEpisodeInput.audio.value,this.episode.audio.match("www.dropbox.com")&&(this.episode.audio=this.episode.audio.replace("dl=0","dl=1")),this.episode.pdf=this.formEpisodeInput.pdf.value,this.episode.pdf.match("www.dropbox.com")&&(this.episode.pdf=this.episode.pdf.replace("dl=0","dl=1")),this.episode.info=this.rteObj.getHtml(),this.episodeInfo=this.episode.info,this.episodeImages=this.episode.images,this.episode.images||this.episode.audio||this.episode.pdf?this.episode.images&&Promise.all(this.episode.images.map(e=>Object(b.b)(this,void 0,void 0,(function*(){if(e.file&&null===e.url.match("res.cloudinary.com")){const t=yield this.imagesService.uploadImage(e.file).toPromise();e.url=t.data.uploadImage}})))).then(()=>{this.episode.imageUrls=[...this.episode.images.map(e=>e.url)],this.updatedEpisode.emit(this.episode)}):this.updatedEpisode.emit(this.episode)}))}cancelEpisode(){this.canceledEpisode.emit(this.episode)}deleteEpisode(){this.deletedEpisode.emit(this.episode)}deleteEpisodeImage(e){this.episode.images=this.episode.images.filter(t=>t.id!==e.id),this.changeDetector.detectChanges(),this.deletedImage.emit(e)}handleImagesInput(e){const t=new FileReader;e[0]&&e[0].type.includes("image/")&&(t.readAsDataURL(e[0]),t.onload=i=>{this.episode.images=[{id:Math.random(),url:t.result,file:e[0]},...this.episode.images],this.changeDetector.detectChanges()})}resetSelectedFile(e){e.target.value=""}setNotesText(e){this.episode.info=e}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(r.c),c.Ob(c.h),c.Ob(a.d),c.Ob(a.a),c.Ob(a.e))},e.\u0275cmp=c.Ib({type:e,selectors:[["anms-episode"]],viewQuery:function(e,t){var i;1&e&&c.Dc(C,!0),2&e&&c.oc(i=c.cc())&&(t.rteObj=i.first)},inputs:{episode:"episode"},outputs:{savedEpisode:"savedEpisode",updatedEpisode:"updatedEpisode",deletedEpisode:"deletedEpisode",deletedImage:"deletedImage",deletedAudio:"deletedAudio",deletedPDF:"deletedPDF",canceledEpisode:"canceledEpisode"},features:[c.Ab([f.f,f.c,f.b,f.a])],decls:55,vars:12,consts:[["autocomplete","off",1,"episode-content",3,"formGroup"],[1,"episode-buttons"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],[1,"episode-number"],["matInput","","type","number","min","0","oninput","validity.valid||(value='');","formControlName","number"],[1,"episode-detailed"],[1,"episode-fields"],[1,"full-width"],["matInput","","type","text","formControlName","title"],[1,"datepicker"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["picker",""],["matInput","","type","text","formControlName","author"],["matInput","","type","text","formControlName","audio"],["matInput","","type","text","formControlName","pdf"],[1,"rteTool",3,"toolbarSettings","value","valueChange","input"],["rteNotes",""],["mat-raised-button","","color","primary"],[1,"select-image",3,"for"],["type","file","accept","image/*",2,"visibility","hidden",3,"id","click","change"],[1,"episode-images"],["class","episode-img",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"],[1,"episode-img"],["alt","Episode image",3,"src"]],template:function(e,t){if(1&e&&(c.Tb(0,"form",0),c.Tb(1,"div",1),c.yc(2,O,2,1,"button",2),c.yc(3,v,2,1,"button",2),c.yc(4,I,2,0,"button",3),c.yc(5,M,2,0,"button",3),c.Sb(),c.Tb(6,"div",4),c.Tb(7,"h5"),c.zc(8,"Episode number"),c.Sb(),c.Tb(9,"mat-form-field"),c.Pb(10,"input",5),c.Tb(11,"mat-error"),c.zc(12," Please fill a number "),c.Sb(),c.Sb(),c.Sb(),c.Tb(13,"div",6),c.Tb(14,"div",7),c.Tb(15,"mat-form-field",8),c.Tb(16,"h5"),c.zc(17,"Title"),c.Sb(),c.Pb(18,"input",9),c.Tb(19,"mat-error"),c.zc(20," Please provide a valid title "),c.Sb(),c.Sb(),c.Tb(21,"div",10),c.Tb(22,"h5"),c.zc(23,"Date"),c.Sb(),c.Tb(24,"mat-form-field"),c.Pb(25,"input",11),c.Tb(26,"mat-datepicker-toggle",12),c.Tb(27,"mat-icon",13),c.zc(28,"today"),c.Sb(),c.Sb(),c.Pb(29,"mat-datepicker",null,14),c.Sb(),c.Sb(),c.Tb(31,"mat-form-field",8),c.Tb(32,"h5"),c.zc(33,"Author"),c.Sb(),c.Pb(34,"input",15),c.Sb(),c.Sb(),c.Tb(35,"div",7),c.Tb(36,"mat-form-field",8),c.Tb(37,"h5"),c.zc(38,"Audio"),c.Sb(),c.Pb(39,"input",16),c.Sb(),c.Tb(40,"mat-form-field",8),c.Tb(41,"h5"),c.zc(42,"PDF link"),c.Sb(),c.Pb(43,"input",17),c.Sb(),c.Tb(44,"div",8),c.Tb(45,"h5"),c.zc(46,"Notes"),c.Sb(),c.Tb(47,"ejs-richtexteditor",18,19),c.bc("valueChange",(function(e){return t.episode.info=e}))("input",(function(e){return t.setNotesText(e.target.innerHTML)})),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(49,"button",20),c.Tb(50,"label",21),c.zc(51,"Add Image"),c.Sb(),c.Sb(),c.Tb(52,"input",22),c.bc("click",(function(e){return t.resetSelectedFile(e)}))("change",(function(e){return t.handleImagesInput(e.target.files)})),c.Sb(),c.Tb(53,"div",23),c.yc(54,k,4,1,"div",24),c.Sb(),c.Sb()),2&e){const e=c.pc(30);c.kc("formGroup",t.editEpisodeForm),c.Bb(2),c.kc("ngIf",t.episode.id),c.Bb(1),c.kc("ngIf",!t.episode.id),c.Bb(1),c.kc("ngIf",t.episode.id),c.Bb(1),c.kc("ngIf",!t.episode.id),c.Bb(20),c.kc("matDatepicker",e),c.Bb(1),c.kc("for",e),c.Bb(21),c.kc("toolbarSettings",t.tools)("value",t.episode.info),c.Bb(3),c.kc("for",t.episode.id),c.Bb(2),c.kc("id",t.episode.id),c.Bb(2),c.kc("ngForOf",t.episode.images)}},directives:[r.q,r.k,r.e,o.k,m.b,g.b,r.n,r.b,r.j,r.d,m.a,w.b,w.d,m.g,P.a,w.e,w.a,f.d,h.a,o.j],styles:[".episode-content[_ngcontent-%COMP%]{padding:1.5rem;background-color:#adadad;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:start;align-items:flex-start;margin-bottom:2rem;-webkit-animation:fade-animation 1s;animation:fade-animation 1s}.episode-buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;margin-right:2rem}.episode-buttons[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:.2rem .5rem;margin:0;font-size:1.2rem;border:2px solid grey;color:grey;white-space:nowrap}.episode-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1rem;margin-bottom:.5rem}.episode-number[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;margin-top:.5rem}.episode-number[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:1rem}.episode-number[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:20%}.episode-number[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .episode-number[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.episode-detailed[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;align-self:stretch;flex-wrap:wrap}.episode-detailed[_ngcontent-%COMP%]   .episode-fields[_ngcontent-%COMP%]{width:50%;min-width:280px}.episode-detailed[_ngcontent-%COMP%]   .episode-fields[_ngcontent-%COMP%]   .datepicker[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:-20px}.episode-detailed[_ngcontent-%COMP%]   .episode-fields[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:80%;margin-bottom:2rem}.episode-detailed[_ngcontent-%COMP%]   .episode-fields[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]   .rteTool[_ngcontent-%COMP%]{background-color:transparent;z-index:0}.episode-detailed[_ngcontent-%COMP%]   .episode-fields[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]   .rteTool[_ngcontent-%COMP%]   .e-toolbar-wrapper[_ngcontent-%COMP%]{min-height:42px}.episode-detailed[_ngcontent-%COMP%]   .episode-fields[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem}.episode-detailed[_ngcontent-%COMP%]   p.caption[_ngcontent-%COMP%]{color:#fff;margin:0}.episode-detailed[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem}.episode-detailed[_ngcontent-%COMP%]   p.detailed[_ngcontent-%COMP%]{margin:0}.select-image[_ngcontent-%COMP%]{width:100%;height:100%;cursor:pointer}.episode-images[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;flex-direction:row;flex-wrap:wrap}.episode-images[_ngcontent-%COMP%], .episode-images[_ngcontent-%COMP%]   .episode-img[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-direction:normal}.episode-images[_ngcontent-%COMP%]   .episode-img[_ngcontent-%COMP%]{-webkit-box-orient:vertical;flex-direction:column;-webkit-box-align:center;align-items:center}.episode-images[_ngcontent-%COMP%]   .episode-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px;margin:.5rem}@-webkit-keyframes fade-animation{0%{opacity:0;-webkit-transition:all .35s cubic-bezier(1,.01,0,.99);transition:all .35s cubic-bezier(1,.01,0,.99)}to{opacity:1}}@keyframes fade-animation{0%{opacity:0;-webkit-transition:all .35s cubic-bezier(1,.01,0,.99);transition:all .35s cubic-bezier(1,.01,0,.99)}to{opacity:1}}"],changeDetection:0}),e})();function S(e,t){if(1&e){const e=c.Ub();c.Tb(0,"button",25),c.bc("click",(function(t){return c.rc(e),c.fc().saveAndUpdate()})),c.zc(1," Save Show "),c.Sb()}if(2&e){const e=c.fc();c.kc("disabled",e.editForm.invalid||!e.showPodcastButton())}}function E(e,t){if(1&e){const e=c.Ub();c.Tb(0,"button",25),c.bc("click",(function(t){return c.rc(e),c.fc().saveAndCreate()})),c.zc(1," Create Show "),c.Sb()}if(2&e){const e=c.fc();c.kc("disabled",e.editForm.invalid)}}function y(e,t){if(1&e){const e=c.Ub();c.Tb(0,"anms-episode",26),c.bc("savedEpisode",(function(t){return c.rc(e),c.fc().onSaveEpisode(t)}))("updatedEpisode",(function(t){return c.rc(e),c.fc().onUpdateEpisode(t)}))("canceledEpisode",(function(t){return c.rc(e),c.fc().onCancelEpisode(t)}))("deletedEpisode",(function(t){return c.rc(e),c.fc().onDeleteEpisode(t)}))("deletedImage",(function(t){return c.rc(e),c.fc().onDeleteEpImage(t)})),c.Sb()}2&e&&c.kc("episode",t.$implicit)}const T=[{path:"",component:(()=>{class e{constructor(e,t,o,n,s,a,r,c){this.route=e,this.formBuilder=t,this.router=o,this.showsService=n,this.imagesService=s,this.episodesService=a,this.changeDetector=r,this._snackBar=c,this.routeAnimationsElements=d.c,this.show={title:"",description:"",episodes:[]},this.imageUrl=null,this.imagesNotSaved=[],this.imagesToDelete=[],this.loading=!1,this.titleError=null,this.noImage=i("YuY8")}ngOnInit(){this.podcastId=this.route.snapshot.params.id,this.editForm=this.formBuilder.group({title:["New Title",r.p.required],description:["New Description",r.p.required],linkApplePodcasts:null,linkSpotify:null}),"create"!==this.route.snapshot.params.id&&(this.startLoadingIndicator(),this.showsService.getSelectedShow(+this.podcastId).subscribe(e=>{this.show=e.data.showById,this.show.image&&(this.imageUrl=this.show.image.url,this.previousShowImage=this.show.image.url),this.editForm=this.formBuilder.group({title:[this.show.title,r.p.required],description:[this.show.description,r.p.required],linkApplePodcasts:this.show.linkApplePodcasts,linkSpotify:this.show.linkSpotify}),this.changeDetector.detectChanges(),this.stopLoadingIndicator(null)}))}get formInput(){return this.editForm.controls}createEpisode(){this.show.episodes=[{title:"New episode",number:this.show.episodes.length+1,images:[]},...this.show.episodes],this.changeDetector.detectChanges()}onDeleteEpisode(e){e.images.length>0&&e.images.forEach(e=>{this.imagesToDelete.push(e.url)}),this.episodesService.deleteEpisodeFromShow(+this.podcastId,e.id).subscribe({complete:()=>{console.log("Episode is deleted")},error:e=>{console.log("error",e)}}),this.show.episodes=this.show.episodes.filter(t=>t.id!==e.id),this.changeDetector.detectChanges()}onSaveEpisode(e){this.episodesService.addEpisodeToShow(+this.podcastId,{title:e.title,number:e.number,date:e.date,author:e.author,audio:e.audio,pdf:e.pdf,info:e.info,imageUrls:e.imageUrls}).subscribe(t=>{const i=t.data.addEpisodeToShow.data.episodes;e.id=i[i.length-1].id})}onUpdateEpisode(e){this.deleteEpisodeImages(this.imagesToDelete),this.episodesService.updateEpisode(+e.id,{title:e.title,number:e.number,date:e.date,author:e.author,audio:e.audio,pdf:e.pdf,info:e.info,imageUrls:e.imageUrls}).subscribe({complete:()=>{console.log("Episode is updated")},error:e=>{console.log("error",e)}})}saveAndCreate(){this.deleteEpisodeImages(this.imagesToDelete),this.show={title:this.formInput.title.value,description:this.formInput.description.value,imageUrl:this.imageUrl,linkApplePodcasts:this.formInput.linkApplePodcasts.value,linkSpotify:this.formInput.linkSpotify.value},this.podcastImage?(this.startLoadingIndicator(),this.imagesService.uploadImage(this.podcastImage).subscribe({next:e=>{this.show.imageUrl=e.data.uploadImage},complete:()=>{this.createNewShow()},error:e=>{this.stopLoadingIndicator(null),console.log("error",e)}})):this.createNewShow()}createNewShow(){this.startLoadingIndicator(),this.showsService.createShow(this.show).subscribe({complete:()=>{this.stopLoadingIndicator(null),this.router.navigate(["shows"])},error:e=>{var t;const i=(null===(t=e)||void 0===t?void 0:t.graphQLErrors[0].message)||"Unknown server error";this.errorMessage(i),this.stopLoadingIndicator(i)}})}saveAndUpdate(){this.deleteEpisodeImages(this.imagesToDelete);const e={title:this.formInput.title.value,description:this.formInput.description.value,imageUrl:this.imageUrl?this.imageUrl:this.noImage,linkApplePodcasts:this.formInput.linkApplePodcasts.value,linkSpotify:this.formInput.linkSpotify.value};this.show.image&&this.imageUrl!==this.show.image.url&&this.imagesService.deleteImage(this.show.image.url).subscribe({complete:()=>{console.log("Image deleted")},error:e=>{console.log("error",e)}}),this.changeDetector.detectChanges(),this.podcastImage?(this.startLoadingIndicator(),this.imagesService.uploadImage(this.podcastImage).subscribe({next:t=>{e.imageUrl=t.data.uploadImage},complete:()=>{this.updateCurrentShow(e)},error:e=>{this.stopLoadingIndicator(null),console.log("error",e)}})):this.updateCurrentShow(e)}deleteImage(){this.previousShowImage=this.imageUrl,this.podcastImage=null,this.imageUrl=null,this.show.image=null,this.changeDetector.detectChanges()}resetPodcastChanges(){var e,t;document.getElementById("poscast-title").src=(null===(e=this.show.image)||void 0===e?void 0:e.url)?this.show.image.url:this.previousShowImage||this.noImage,this.formInput.title.setValue(this.show.title),this.formInput.description.setValue(this.show.description),this.formInput.linkApplePodcasts.setValue(this.show.linkApplePodcasts),this.formInput.linkSpotify.setValue(this.show.linkSpotify),this.imageUrl=(null===(t=this.show.image)||void 0===t?void 0:t.url)?this.show.image.url:this.previousShowImage||this.noImage,this.podcastImage=null}updateCurrentShow(e){this.startLoadingIndicator(),this.showsService.updateShow(this.show.id,e).subscribe({complete:()=>{this.stopLoadingIndicator(null),this.router.navigate(["shows"])},error:e=>{var t;const i=(null===(t=e)||void 0===t?void 0:t.graphQLErrors[0].message)||"Unknown server error";this.errorMessage(i),this.stopLoadingIndicator(i)}})}handleFileInput(e){var t;const i=new FileReader;e[0]&&e[0].type.includes("image/")?(this.podcastImage=e[0],i.readAsDataURL(e[0]),i.onload=e=>{this.imageUrl=i.result,this.changeDetector.detectChanges()}):document.getElementById("poscast-title").src=(null===(t=this.show.image)||void 0===t?void 0:t.url)?this.show.image.url:this.previousShowImage||this.noImage}onDeleteEpImage(e){this.imagesToDelete.push(e.url)}deleteEpisodeImages(e){e.length>0&&this.imagesService.deleteManyImages(e).subscribe({complete:()=>{console.log("Images deleted")},error:e=>{console.log("error",e)}})}startLoadingIndicator(){this.loading=!0,this.changeDetector.detectChanges()}stopLoadingIndicator(e){this.loading=!1,this.titleError=e,this.changeDetector.detectChanges()}errorMessage(e){this._snackBar.open(e,"",{panelClass:["mat-toolbar","mat-warn"]})}ngOnDestroy(){this.deleteEpisodeImages(this.imagesNotSaved),this.imagesToDelete=[]}showPodcastButton(){return Boolean(this.formInput.title.value!==this.show.title||this.formInput.description.value!==this.show.description||this.formInput.linkApplePodcasts.value!==this.show.linkApplePodcasts||this.formInput.linkSpotify.value!==this.show.linkSpotify||this.imageUrl!==this.previousShowImage)}onCancelEpisode(e){this.show.episodes=this.show.episodes.filter(t=>t.id!==e.id),this.changeDetector.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(c.Ob(s.a),c.Ob(r.c),c.Ob(s.h),c.Ob(a.f),c.Ob(a.d),c.Ob(a.c),c.Ob(c.h),c.Ob(p.b))},e.\u0275cmp=c.Ib({type:e,selectors:[["anms-podcast"]],decls:49,vars:10,consts:[[1,"loading-indicator-container"],[1,"loading-indicator"],["autocomplete","off",1,"wrapper",3,"formGroup"],[1,"podcast-save"],["mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"podcast-container"],[1,"podcast-image"],["id","poscast-title","alt","Show image",3,"src"],["mat-raised-button","","color","accent",3,"click"],["for","files","mat-raised-button","","color","primary"],["for","files",1,"select-image"],["type","file","accept","image/*","id","files",2,"visibility","hidden",3,"change"],[1,"podcast-info"],[1,"podcast-detailed"],[1,"full-width"],["matInput","","type","text","formControlName","title"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","8","formControlName","description",2,"padding","0"],["autosize","cdkTextareaAutosize"],[1,"podcast-links"],["matInput","","type","text","formControlName","linkApplePodcasts"],["matInput","","type","text","formControlName","linkSpotify"],[1,"episodes"],[1,"episodes-panel"],[3,"episode","savedEpisode","updatedEpisode","canceledEpisode","deletedEpisode","deletedImage",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"episode","savedEpisode","updatedEpisode","canceledEpisode","deletedEpisode","deletedImage"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Pb(1,"mat-spinner",1),c.Sb(),c.Tb(2,"form",2),c.Tb(3,"div",3),c.yc(4,S,2,1,"button",4),c.yc(5,E,2,1,"button",4),c.Tb(6,"button",5),c.bc("click",(function(e){return t.resetPodcastChanges()})),c.zc(7," Discards changes "),c.Sb(),c.Sb(),c.Tb(8,"div",6),c.Tb(9,"div",7),c.Pb(10,"img",8),c.Tb(11,"button",9),c.bc("click",(function(e){return t.deleteImage()})),c.zc(12,"Delete image"),c.Sb(),c.Tb(13,"button",10),c.Tb(14,"label",11),c.zc(15,"Select Image"),c.Sb(),c.Sb(),c.Tb(16,"input",12),c.bc("change",(function(e){return t.handleFileInput(e.target.files)})),c.Sb(),c.Sb(),c.Tb(17,"div",13),c.Tb(18,"div",14),c.Tb(19,"mat-form-field",15),c.Tb(20,"h3"),c.zc(21,"Title"),c.Sb(),c.Pb(22,"input",16),c.Tb(23,"mat-error"),c.zc(24," Please provide a valid title "),c.Sb(),c.Sb(),c.Tb(25,"mat-form-field",15),c.Tb(26,"h5"),c.zc(27,"About"),c.Sb(),c.Tb(28,"textarea",17,18),c.zc(30,"                    "),c.Sb(),c.Tb(31,"mat-error"),c.zc(32," Please provide a valid description "),c.Sb(),c.Sb(),c.Sb(),c.Tb(33,"div",19),c.Tb(34,"mat-form-field",15),c.Tb(35,"h5"),c.zc(36,"Apple podcasts link"),c.Sb(),c.Pb(37,"input",20),c.Sb(),c.Tb(38,"mat-form-field",15),c.Tb(39,"h5"),c.zc(40,"Spotify link"),c.Sb(),c.Pb(41,"input",21),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(42,"div",22),c.Tb(43,"div",23),c.Tb(44,"h3"),c.zc(45,"Episodes"),c.Sb(),c.Tb(46,"button",9),c.bc("click",(function(e){return t.createEpisode()})),c.zc(47," Create Episode "),c.Sb(),c.Sb(),c.yc(48,y,1,1,"anms-episode",24),c.Sb(),c.Sb()),2&e&&(c.xc("display",t.loading?"flex":"none"),c.Bb(2),c.xc("display",t.loading?"none":"block"),c.kc("formGroup",t.editForm),c.Bb(2),c.kc("ngIf","create"!==t.podcastId),c.Bb(1),c.kc("ngIf","create"===t.podcastId),c.Bb(1),c.kc("disabled",t.editForm.invalid||!t.showPodcastButton()),c.Bb(4),c.kc("src",t.imageUrl?t.imageUrl:t.noImage,c.tc),c.Bb(38),c.kc("ngForOf",t.show.episodes))},directives:[l.b,r.q,r.k,r.e,o.k,h.a,m.b,g.b,r.b,r.j,r.d,m.a,u.b,o.j,_],styles:[".wrapper[_ngcontent-%COMP%]{padding:2rem 3rem}.wrapper[_ngcontent-%COMP%]   .podcast-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap}.wrapper[_ngcontent-%COMP%]   .podcast-save[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{margin-left:1rem}.wrapper[_ngcontent-%COMP%]   .podcast-image[_ngcontent-%COMP%]{width:20%;min-width:250px}.wrapper[_ngcontent-%COMP%]   .podcast-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:200px;display:block;margin-bottom:.5rem}.wrapper[_ngcontent-%COMP%]   .podcast-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;padding:0;margin-top:.5rem}.wrapper[_ngcontent-%COMP%]   .podcast-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .select-image[_ngcontent-%COMP%]{width:100%;height:100%;cursor:pointer}.wrapper[_ngcontent-%COMP%]   .podcast-info[_ngcontent-%COMP%]{width:75%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap}.wrapper[_ngcontent-%COMP%]   .podcast-detailed[_ngcontent-%COMP%]{width:55%;min-width:280px}.wrapper[_ngcontent-%COMP%]   .podcast-detailed[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:80%}.wrapper[_ngcontent-%COMP%]   .podcast-detailed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:0;font-weight:700;font-size:2rem}.wrapper[_ngcontent-%COMP%]   .podcast-detailed[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:.5rem 0;font-weight:700;font-size:1.5rem}.wrapper[_ngcontent-%COMP%]   .podcast-links[_ngcontent-%COMP%]{width:35%;min-width:280px}.wrapper[_ngcontent-%COMP%]   .podcast-links[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:80%;padding:.3rem 0}.wrapper[_ngcontent-%COMP%]   .podcast-links[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]   mat-input-element[_ngcontent-%COMP%]{padding:0}.wrapper[_ngcontent-%COMP%]   .podcast-links[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:.5rem 0;font-weight:700;font-size:1rem}.wrapper[_ngcontent-%COMP%]   .podcast-save[_ngcontent-%COMP%]{width:100%;padding-bottom:2rem}.wrapper[_ngcontent-%COMP%]   .podcast-save[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:150px}.wrapper[_ngcontent-%COMP%]   .podcast-subscribe[_ngcontent-%COMP%]{padding:1rem 0}.wrapper[_ngcontent-%COMP%]   .podcast-subscribe[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.3rem .8rem;border-color:transparent;border-radius:5px;cursor:pointer;color:#fff;background-color:grey}.wrapper[_ngcontent-%COMP%]   .episodes[_ngcontent-%COMP%]{margin-top:3rem}.wrapper[_ngcontent-%COMP%]   .episodes[_ngcontent-%COMP%]   .episodes-panel[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin-bottom:1rem}.wrapper[_ngcontent-%COMP%]   .episodes[_ngcontent-%COMP%]   .episodes-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:2rem;margin-bottom:0}.wrapper[_ngcontent-%COMP%]   .episodes[_ngcontent-%COMP%]   .episodes-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.5rem .5rem .5rem 2rem}.wrapper.mobile[_ngcontent-%COMP%]{padding:1.5rem}.wrapper.mobile[_ngcontent-%COMP%]   .podcast-detailed[_ngcontent-%COMP%]{padding:1rem 0}.wrapper.mobile[_ngcontent-%COMP%]   .podcast-detailed[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.wrapper.mobile[_ngcontent-%COMP%]   .podcast-detailed[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.2rem}.wrapper.mobile[_ngcontent-%COMP%]   .podcast-subscribe[_ngcontent-%COMP%]{padding:0}.loading-indicator-container[_ngcontent-%COMP%]{height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.loading-indicator[_ngcontent-%COMP%]{margin:3.7em}"],changeDetection:0}),e})(),data:{title:"anms.menu.podcast"}}];let x=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(t){return new(t||e)},imports:[[s.l.forChild(T)],s.l]}),e})();i.d(t,"PodcastModule",(function(){return z}));let z=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(t){return new(t||e)},imports:[[o.c,n.a,x,f.e]]}),e})()}}]);