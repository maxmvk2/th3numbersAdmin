function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{dw5w:function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),a=i("PCNd"),s=i("tyNb"),r=i("mrSG"),c=i("o0su"),o=i("fXoL"),l=i("3Pt+"),d=i("4GOx"),m=i("0IaG"),u=i("NFeN"),b=i("bTqV"),g=i("kmnG"),h=i("qFsG"),p=i("d3UM"),f=i("FKr1");function v(t,e){if(1&t&&(o.Vb(0,"mat-option",21),o.Dc(1),o.Ub()),2&t){var i=e.$implicit;o.mc("value",i.id),o.Cb(1),o.Ec(i.statisticThemeName)}}function C(t,e){if(1&t){var i=o.Wb();o.Vb(0,"div",22),o.Vb(1,"mat-form-field"),o.Vb(2,"mat-label"),o.Dc(3,"Statistics url"),o.Ub(),o.Rb(4,"input",23),o.Ub(),o.Vb(5,"button",24),o.dc("click",(function(t){o.vc(i);var n=e.index;return o.hc().removeUrl(n)})),o.Vb(6,"mat-icon"),o.Dc(7,"remove"),o.Ub(),o.Ub(),o.Ub()}if(2&t){var n=e.index,a=o.hc();o.Cb(4),o.nc("formControlName",n),o.Cb(1),o.mc("disabled",a.editStatisticForm.value.statisticsUrls.length<2)}}var U,k=((U=function(){function t(e,i,n){_classCallCheck(this,t),this.dialogRef=e,this._formBuilder=i,this._imagesService=n,this.statisticsThemes=[],this.createdStatistic=new o.n,this.initialUrls=[""],this.imageUrl=null,this.noImage="assets/podcast-symbol-clipart.jpg"}return _createClass(t,[{key:"ngOnInit",value:function(){this.editStatisticForm=this._formBuilder.group({title:["New statistic",l.r.required],subTitle:"",description:"",statisticsThemeId:this.statisticsThemes[0].id,statisticsUrls:this._formBuilder.array(this.initialUrls)}),this.currentUrls=this.editStatisticForm.controls.statisticsUrls}},{key:"addNewUrl",value:function(){this.currentUrls=this.editStatisticForm.controls.statisticsUrls,this.currentUrls.push(new l.e(""))}},{key:"removeUrl",value:function(t){this.currentUrls.removeAt(t)}},{key:"createStatistic",value:function(){var t;return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._statisticsImage,!e.t0){e.next=5;break}return e.next=4,this.uploadStatisticsImage(this._statisticsImage);case 4:i=e.sent;case 5:this._newStatistic={title:this.editStatisticForm.value.title,subTitle:this.editStatisticForm.value.subTitle,description:this.editStatisticForm.value.description,statisticsUrls:this.editStatisticForm.value.statisticsUrls.map((function(t){return{url:t}})),imageUrl:(null===(t=i)||void 0===t?void 0:t.data.uploadImage)||"",statisticsThemeId:this.editStatisticForm.value.statisticsThemeId},this.createdStatistic.emit(this._newStatistic),this.dialogRef.close();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"onClose",value:function(){this.dialogRef.close()}},{key:"handleFileInput",value:function(t){var e=this,i=new FileReader;t[0]&&t[0].type.includes("image/")&&(this._statisticsImage=t[0],i.readAsDataURL(t[0]),i.onload=function(){e.imageUrl=i.result})}},{key:"deleteImage",value:function(){this._statisticsImage=null,this.imageUrl=this.noImage}},{key:"resetSelectedFile",value:function(t){t.target.value=""}},{key:"uploadStatisticsImage",value:function(t){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._imagesService.uploadImage(t).toPromise();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),d.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}}]),t}()).\u0275fac=function(t){return new(t||U)(o.Qb(m.d),o.Qb(l.d),o.Qb(c.c))},U.\u0275cmp=o.Kb({type:U,selectors:[["anms-create-statistic"]],inputs:{statisticsThemes:"statisticsThemes"},decls:39,vars:7,consts:[[1,"create-modal"],[1,"close"],[3,"click"],["mat-dialog-content","",1,"row","content"],[1,"col-lg-5","stat-image"],["id","podcast-title","alt","Show image",3,"src"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","primary"],["for","files",1,"select-image"],["type","file","accept","image/*","id","files",3,"click","change"],["autocomplete","off",1,"col-lg-7",3,"formGroup"],[1,"title"],["matInput","","type","text","formControlName","title"],["matInput","","type","text","formControlName","subTitle"],["matInput","","type","text","rows","2","formControlName","description"],["appearance","fill"],["formControlName","statisticsThemeId"],[3,"value",4,"ngFor","ngForOf"],["class","url","formArrayName","statisticsUrls",4,"ngFor","ngForOf"],["mat-mini-fab","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",1,"button-create",3,"disabled","click"],[3,"value"],["formArrayName","statisticsUrls",1,"url"],["matInput","","type","text",3,"formControlName"],["mat-mini-fab","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"mat-icon",2),o.dc("click",(function(t){return e.onClose()})),o.Dc(3,"close"),o.Ub(),o.Ub(),o.Vb(4,"div",3),o.Vb(5,"div",4),o.Rb(6,"img",5),o.Vb(7,"button",6),o.dc("click",(function(t){return e.deleteImage()})),o.Dc(8," Delete image "),o.Ub(),o.Vb(9,"button",7),o.Vb(10,"label",8),o.Dc(11,"Select image"),o.Ub(),o.Ub(),o.Vb(12,"input",9),o.dc("click",(function(t){return e.resetSelectedFile(t)}))("change",(function(t){return e.handleFileInput(t.target.files)})),o.Ub(),o.Ub(),o.Vb(13,"form",10),o.Vb(14,"mat-form-field",11),o.Vb(15,"mat-label"),o.Dc(16,"Statistics title"),o.Ub(),o.Rb(17,"input",12),o.Vb(18,"mat-error"),o.Dc(19,"Please provide a valid title"),o.Ub(),o.Ub(),o.Vb(20,"mat-form-field"),o.Vb(21,"mat-label"),o.Dc(22,"Statistics subtitle"),o.Ub(),o.Rb(23,"input",13),o.Ub(),o.Vb(24,"mat-form-field"),o.Vb(25,"mat-label"),o.Dc(26,"Statistics description"),o.Ub(),o.Rb(27,"textarea",14),o.Ub(),o.Vb(28,"mat-form-field",15),o.Vb(29,"mat-label"),o.Dc(30,"Statistics theme"),o.Ub(),o.Vb(31,"mat-select",16),o.Cc(32,v,2,2,"mat-option",17),o.Ub(),o.Ub(),o.Cc(33,C,8,2,"div",18),o.Vb(34,"button",19),o.dc("click",(function(t){return e.addNewUrl()})),o.Vb(35,"mat-icon"),o.Dc(36,"add"),o.Ub(),o.Ub(),o.Vb(37,"button",20),o.dc("click",(function(t){return e.createStatistic()})),o.Dc(38," Create statistic "),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Cb(6),o.mc("src",e.imageUrl?e.imageUrl:e.noImage,o.xc),o.Cb(1),o.mc("disabled",e.imageUrl===e.noImage),o.Cb(6),o.mc("formGroup",e.editStatisticForm),o.Cb(19),o.mc("ngForOf",e.statisticsThemes),o.Cb(1),o.mc("ngForOf",e.editStatisticForm.controls.statisticsUrls.controls),o.Cb(1),o.mc("disabled",e.editStatisticForm.value.statisticsUrls.length>4),o.Cb(3),o.mc("disabled",e.editStatisticForm.invalid))},directives:[u.a,m.b,b.a,l.s,l.m,l.g,g.b,g.e,h.b,l.b,l.l,l.f,g.a,p.a,n.j,f.l,l.c],styles:[".create-modal[_ngcontent-%COMP%]{max-width:650px;width:65vw}.close[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;margin-bottom:20px}.close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}.content[_ngcontent-%COMP%]{display:-webkit-box!important;display:flex!important;margin:0 -24px 0 0!important;padding:0 24px 0 0!important;-webkit-box-pack:center;justify-content:center}.stat-image[_ngcontent-%COMP%]{width:200px;padding:0!important}.stat-image[_ngcontent-%COMP%]   #files[_ngcontent-%COMP%]{visibility:hidden;width:100px;overflow:hidden}.stat-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:200px;display:block;margin-bottom:.5rem}.stat-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;padding:0;margin-top:.5rem}.stat-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .select-image[_ngcontent-%COMP%]{width:100%;height:100%;cursor:pointer}form[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;padding:0!important}mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:120px}.title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.5rem}.url[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.url[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;margin-left:30px}.button-create[_ngcontent-%COMP%]{margin-top:40px;width:100%;max-width:200px;align-self:center}  .mat-form-field-appearance-fill .mat-form-field-flex{background-color:transparent!important;padding:0!important;-webkit-transform:none!important;transform:none!important}  .mat-form-field-appearance-fill .mat-select-arrow-wrapper{-webkit-transform:none!important;transform:none!important}"]}),U),w=i("Xa2L"),x=i("cz58"),_=(i("VHTt"),i("pKmL")),S=i("Wp6s");function P(t,e){if(1&t&&(o.Vb(0,"mat-option",20),o.Dc(1),o.Ub()),2&t){var i=e.$implicit;o.mc("value",i.id),o.Cb(1),o.Ec(i.statisticThemeName)}}function O(t,e){if(1&t){var i=o.Wb();o.Vb(0,"div",21),o.Vb(1,"mat-form-field"),o.Vb(2,"mat-label"),o.Dc(3,"Statistics url"),o.Ub(),o.Rb(4,"input",22),o.Ub(),o.Vb(5,"button",23),o.dc("click",(function(t){o.vc(i);var n=e.index;return o.hc().removeUrl(n)})),o.Vb(6,"mat-icon"),o.Dc(7,"remove"),o.Ub(),o.Ub(),o.Ub()}if(2&t){var n=e.index,a=o.hc();o.Cb(4),o.nc("formControlName",n),o.Cb(1),o.mc("disabled",a.editStatisticForm.value.statisticsUrls.length<2)}}var y,V=function(t,e){return{"not-published":t,published:e}},I=((y=function(){function t(e,i,n){_classCallCheck(this,t),this._formBuilder=e,this.changeDetector=i,this._imagesService=n,this.statisticsThemes=[],this.updatedStatistic=new o.n,this.deletedStatistic=new o.n,this.routeAnimationsElements=_.c,this.imageUrl=null,this.noImage="assets/podcast-symbol-clipart.jpg"}return _createClass(t,[{key:"ngOnInit",value:function(){this.editStatisticForm=this._formBuilder.group({title:[this.statistic.title,l.r.required],subTitle:this.statistic.subTitle,description:this.statistic.description,statisticsUrls:this._formBuilder.array(this.statistic.statisticsUrls.map((function(t){return t.url}))),imageUrl:this.statistic.imageUrl,statisticsThemeId:this.statistic.statisticsTheme.id}),this.imageUrl=this.statistic.imageUrl,this.currentUrls=this.editStatisticForm.controls.statisticsUrls}},{key:"addNewUrl",value:function(){this.currentUrls=this.editStatisticForm.controls.statisticsUrls,this.currentUrls.push(new l.e(""))}},{key:"removeUrl",value:function(t){this.currentUrls.removeAt(t)}},{key:"saveStatistic",value:function(){var t;return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deleteStatisticsImage();case 2:if(e.t0=this._statisticsImage,!e.t0){e.next=7;break}return e.next=6,this.uploadStatisticsImage(this._statisticsImage);case 6:i=e.sent;case 7:n={id:this.statistic.id,title:this.editStatisticForm.value.title,subTitle:this.editStatisticForm.value.subTitle,description:this.editStatisticForm.value.description,statisticsUrls:this.editStatisticForm.value.statisticsUrls.map((function(t){return{url:t}})),imageUrl:(null===(t=i)||void 0===t?void 0:t.data.uploadImage)||this.statistic.imageUrl,statisticsThemeId:this.editStatisticForm.value.statisticsThemeId},this.updatedStatistic.emit(n);case 9:case"end":return e.stop()}}),e,this)})))}},{key:"deleteStatistic",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.imageUrl=this.noImage,t.next=3,this.deleteStatisticsImage();case 3:this.deletedStatistic.emit(this.statistic);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"handleFileInput",value:function(t){var e=this,i=new FileReader;t[0]&&t[0].type.includes("image/")&&(this._statisticsImage=t[0],i.readAsDataURL(t[0]),i.onload=function(){e.imageUrl=i.result,e.changeDetector.detectChanges()})}},{key:"deleteImage",value:function(){this._statisticsImage=null,this.imageUrl=this.noImage,this.changeDetector.detectChanges()}},{key:"resetSelectedFile",value:function(t){t.target.value=""}},{key:"uploadStatisticsImage",value:function(t){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._imagesService.uploadImage(t).toPromise();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),d.a.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"deleteStatisticsImage",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.imageUrl===this.statistic.imageUrl){t.next=10;break}return t.prev=1,t.next=4,this._imagesService.deleteImage(this.statistic.imageUrl).toPromise();case 4:this.statistic.imageUrl="",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),d.a.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}}]),t}()).\u0275fac=function(t){return new(t||y)(o.Qb(l.d),o.Qb(o.h),o.Qb(c.c))},y.\u0275cmp=o.Kb({type:y,selectors:[["anms-stat"]],inputs:{statistic:"statistic",statisticsThemes:"statisticsThemes"},outputs:{updatedStatistic:"updatedStatistic",deletedStatistic:"deletedStatistic"},decls:42,vars:14,consts:[["autocomplete","off",3,"formGroup","ngClass"],[3,"ngClass"],[1,"row"],[1,"col-lg-3","stat-image"],["id","podcast-title","alt","Show image",3,"src"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","primary"],[1,"select-image",3,"for"],["type","file","accept","image/*",1,"hidden",3,"id","click","change"],[1,"col-lg-9"],["matInput","","type","text","formControlName","title"],["matInput","","type","text","formControlName","subTitle"],["matInput","","type","text","rows","2","formControlName","description"],["appearance","fill"],["formControlName","statisticsThemeId"],[3,"value",4,"ngFor","ngForOf"],["class","url","formArrayName","statisticsUrls",4,"ngFor","ngForOf"],["mat-mini-fab","","color","accent",3,"disabled","click"],["mat-button","","color","accent",3,"disabled","click"],["mat-button","","color","warn",3,"click"],[3,"value"],["formArrayName","statisticsUrls",1,"url"],["matInput","","type","text",3,"formControlName"],["mat-mini-fab","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(o.Vb(0,"form",0),o.Vb(1,"mat-card",1),o.Vb(2,"div",2),o.Vb(3,"div",3),o.Rb(4,"img",4),o.Vb(5,"button",5),o.dc("click",(function(t){return e.deleteImage()})),o.Dc(6," Delete image "),o.Ub(),o.Vb(7,"button",6),o.Vb(8,"label",7),o.Dc(9,"Select image"),o.Ub(),o.Ub(),o.Vb(10,"input",8),o.dc("click",(function(t){return e.resetSelectedFile(t)}))("change",(function(t){return e.handleFileInput(t.target.files)})),o.Ub(),o.Ub(),o.Vb(11,"div",9),o.Vb(12,"mat-card-title"),o.Vb(13,"mat-form-field"),o.Vb(14,"mat-label"),o.Dc(15,"Statistic title"),o.Ub(),o.Rb(16,"input",10),o.Vb(17,"mat-error"),o.Dc(18,"Please provide a valid title"),o.Ub(),o.Ub(),o.Ub(),o.Vb(19,"mat-form-field"),o.Vb(20,"mat-label"),o.Dc(21,"Statistics subtitle"),o.Ub(),o.Rb(22,"input",11),o.Ub(),o.Vb(23,"mat-card-content"),o.Vb(24,"mat-form-field"),o.Vb(25,"mat-label"),o.Dc(26,"Statistic description"),o.Ub(),o.Rb(27,"textarea",12),o.Ub(),o.Ub(),o.Vb(28,"mat-form-field",13),o.Vb(29,"mat-label"),o.Dc(30,"Statistics theme"),o.Ub(),o.Vb(31,"mat-select",14),o.Cc(32,P,2,2,"mat-option",15),o.Ub(),o.Ub(),o.Cc(33,O,8,2,"div",16),o.Vb(34,"button",17),o.dc("click",(function(t){return e.addNewUrl()})),o.Vb(35,"mat-icon"),o.Dc(36,"add"),o.Ub(),o.Ub(),o.Vb(37,"mat-card-actions"),o.Vb(38,"button",18),o.dc("click",(function(t){return e.saveStatistic()})),o.Dc(39," Save "),o.Ub(),o.Vb(40,"button",19),o.dc("click",(function(t){return e.deleteStatistic()})),o.Dc(41,"Delete"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.mc("formGroup",e.editStatisticForm)("ngClass",e.routeAnimationsElements),o.Cb(1),o.mc("ngClass",o.qc(11,V,!e.statistic.viewed,e.statistic.viewed)),o.Cb(3),o.mc("src",e.imageUrl?e.imageUrl:e.noImage,o.xc),o.Cb(1),o.mc("disabled",e.imageUrl===e.noImage),o.Cb(3),o.mc("for",e.statistic.id),o.Cb(2),o.mc("id",e.statistic.id),o.Cb(22),o.mc("ngForOf",e.statisticsThemes),o.Cb(1),o.mc("ngForOf",e.editStatisticForm.controls.statisticsUrls.controls),o.Cb(1),o.mc("disabled",e.editStatisticForm.value.statisticsUrls.length>4),o.Cb(4),o.mc("disabled",e.editStatisticForm.invalid))},directives:[l.s,l.m,l.g,n.i,S.a,b.a,S.g,g.b,g.e,h.b,l.b,l.l,l.f,g.a,S.c,p.a,n.j,u.a,S.b,f.l,l.c],styles:["mat-card[_ngcontent-%COMP%]{margin:10px 0}mat-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:120px}mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{position:relative;vertical-align:center;font-size:1rem;margin-bottom:1rem;display:-webkit-box;display:flex}mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px 0 0;padding:0}.stat-image[_ngcontent-%COMP%]{width:200px}.stat-image[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{visibility:hidden;width:100px;overflow:hidden}.stat-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:200px;display:block;margin-bottom:.5rem}.stat-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:200px;padding:0;margin-top:.5rem}.stat-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .select-image[_ngcontent-%COMP%]{width:100%;height:100%;cursor:pointer}.url[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.url[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;margin-left:30px}.published[_ngcontent-%COMP%]{border-top:10px solid #00ba00}.not-published[_ngcontent-%COMP%]{border-top:10px solid #fa0}  .mat-form-field-appearance-fill .mat-form-field-flex{background-color:transparent!important;padding:0!important;-webkit-transform:none!important;transform:none!important}  .mat-form-field-appearance-fill .mat-select-arrow-wrapper{-webkit-transform:none!important;transform:none!important}"],changeDetection:0}),y);function M(t,e){if(1&t){var i=o.Wb();o.Vb(0,"anms-stat",12),o.dc("updatedStatistic",(function(t){return o.vc(i),o.hc().onSaveStatistic(t)}))("deletedStatistic",(function(t){return o.vc(i),o.hc().onDeleteStatistic(t)})),o.Ub()}if(2&t){var n=e.$implicit,a=o.hc();o.mc("statistic",n)("statisticsThemes",a.statisticsThemes)}}var F,D,T=[{path:"",component:(F=function(){function t(e,i,n,a){_classCallCheck(this,t),this.dialog=e,this._statisticsService=i,this._themesService=n,this._changeDetector=a,this.statistics=[],this.statisticsThemes=[],this.currentPage=1,this.endPage=1,this.loading=!1,this._pageSize=5}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllStatistics(this.currentPage);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnDestroy",value:function(){var t;null===(t=this._createStatisticSubscription)||void 0===t||t.unsubscribe()}},{key:"getAllStatistics",value:function(t){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.startLoadingIndicator(),e.prev=1,e.next=4,this._statisticsService.getStatistics(t,this._pageSize).toPromise();case 4:i=e.sent,this.statistics=i.data.statistics.data,this._totalStatisticsCount=i.data.statistics.totalCount,this.endPage=Math.ceil(this._totalStatisticsCount/this._pageSize),this.getStatisticsThemes(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.stopLoadingIndicator(),d.a.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"getStatisticsThemes",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._themesService.getStatisticsThemes().toPromise();case 3:e=t.sent,this.statisticsThemes=e.data.getStatisticsThemes,this._changeDetector.detectChanges(),this.stopLoadingIndicator(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.stopLoadingIndicator(),d.a.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"openCreateStatWindow",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.dialog.open(k)).componentInstance.statisticsThemes=this.statisticsThemes,this._createStatisticSubscription=e.componentInstance.createdStatistic.subscribe((function(t){return Object(r.b)(i,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.startLoadingIndicator(),e.prev=1,e.next=4,this._statisticsService.createStatistic(t).toPromise();case 4:return this.currentPage=1,this._changeDetector.detectChanges(),e.next=8,this.getAllStatistics(this.currentPage);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.stopLoadingIndicator(),d.a.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})))}),(function(t){return d.a.error(t)}));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"onSaveStatistic",value:function(t){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.startLoadingIndicator(),i={title:t.title,subTitle:t.subTitle,description:t.description,statisticsUrls:t.statisticsUrls,imageUrl:t.imageUrl,statisticsThemeId:t.statisticsThemeId},e.prev=2,e.next=5,this._statisticsService.updateStatistic(t.id,i).toPromise();case 5:this.stopLoadingIndicator(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),d.a.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})))}},{key:"onDeleteStatistic",value:function(t){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.startLoadingIndicator(),e.prev=1,e.next=4,this._statisticsService.deleteStatistic(t.id).toPromise();case 4:return e.next=6,this.getAllStatistics(this.currentPage);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.stopLoadingIndicator(),d.a.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"changePage",value:function(t){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPage=t,this._changeDetector.detectChanges(),e.next=4,this.getAllStatistics(t);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"startLoadingIndicator",value:function(){this.loading=!0,this._changeDetector.detectChanges()}},{key:"stopLoadingIndicator",value:function(){this.loading=!1,this._changeDetector.detectChanges()}}]),t}(),F.\u0275fac=function(t){return new(t||F)(o.Qb(m.a),o.Qb(c.e),o.Qb(c.f),o.Qb(o.h))},F.\u0275cmp=o.Kb({type:F,selectors:[["anms-statistics"]],decls:21,vars:8,consts:[[1,"loading-indicator-container"],[1,"loading-indicator"],[1,"background"],[1,"gradient"],[1,"container"],[1,"row"],[1,"col-md-12","main-heading"],["rtl",""],["mat-raised-button","","color","accent",3,"click"],[3,"statistic","statisticsThemes","updatedStatistic","deletedStatistic",4,"ngFor","ngForOf"],[1,"pages"],["mat-button","","color","accent",3,"disabled","click"],[3,"statistic","statisticsThemes","updatedStatistic","deletedStatistic"]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Rb(1,"mat-spinner",1),o.Ub(),o.Vb(2,"div",2),o.Rb(3,"div",3),o.Vb(4,"div",4),o.Vb(5,"div",5),o.Vb(6,"div",6),o.Vb(7,"h1",7),o.Dc(8,"Statistics"),o.Ub(),o.Vb(9,"button",8),o.dc("click",(function(t){return e.openCreateStatWindow()})),o.Dc(10," Create new statistic "),o.Ub(),o.Ub(),o.Ub(),o.Cc(11,M,1,2,"anms-stat",9),o.Vb(12,"div",10),o.Vb(13,"button",11),o.dc("click",(function(t){return e.changePage(e.currentPage-1)})),o.Vb(14,"mat-icon"),o.Dc(15,"keyboard_arrow_left"),o.Ub(),o.Ub(),o.Vb(16,"div"),o.Dc(17),o.Ub(),o.Vb(18,"button",11),o.dc("click",(function(t){return e.changePage(e.currentPage+1)})),o.Vb(19,"mat-icon"),o.Dc(20,"keyboard_arrow_right"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Bc("display",e.loading?"flex":"none"),o.Cb(2),o.Bc("display",e.loading?"none":"block"),o.Cb(9),o.mc("ngForOf",e.statistics),o.Cb(2),o.mc("disabled",e.currentPage<=1),o.Cb(4),o.Ec(e.currentPage),o.Cb(1),o.mc("disabled",e.currentPage>=e.endPage))},directives:[w.b,x.a,b.a,n.j,u.a,I],styles:['h1[_ngcontent-%COMP%]{text-align:center;font-size:2.2em;text-transform:uppercase;font-weight:700}.background[_ngcontent-%COMP%]{height:100%;padding:50px 0 0;position:relative}.background[_ngcontent-%COMP%]:before{background:url(intro.f4e64f141d1a6a44b226.jpg) no-repeat top fixed;background-size:cover;opacity:.7;content:""}.background[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%], .background[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;bottom:0;right:0;z-index:0}.background[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%]{background:-webkit-gradient(linear,left top,left bottom,color-stop(50%,rgba(48,48,48,0)),to(#303030)) fixed;background:linear-gradient(180deg,rgba(48,48,48,0) 50%,#303030) fixed}.background[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;padding-bottom:50px}.background[_ngcontent-%COMP%]   .pages[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.background[_ngcontent-%COMP%]   .pages[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:32px;margin:12px;padding:6px}.background[_ngcontent-%COMP%]   .pages[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{min-width:32px;font-size:30px;height:32px}.loading-indicator-container[_ngcontent-%COMP%]{height:90%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.loading-indicator[_ngcontent-%COMP%]{margin:3.7em}mat-dialog-container[_ngcontent-%COMP%]{width:700px}'],changeDetection:0}),F),data:{title:"anms.menu.statistics"}}],R=((D=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:D}),D.\u0275inj=o.Nb({factory:function(t){return new(t||D)},imports:[[s.l.forChild(T)],s.l]}),D);i.d(e,"StatisticsModule",(function(){return j}));var N,j=((N=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:N}),N.\u0275inj=o.Nb({factory:function(t){return new(t||N)},imports:[[n.c,a.a,R]]}),N)}}]);