function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{qYmF:function(t,n,e){"use strict";e.r(n);var r,a,o=e("ofXK"),i=e("PCNd"),s=e("tyNb"),c=e("mrSG"),l=e("3Pt+"),b=e("SxV6"),d=e("o0su"),m=e("pKmL"),u=e("fXoL"),g=e("kt0X"),p=e("dNgK"),f=e("Wp6s"),h=e("Xa2L"),k=e("kmnG"),C=e("qFsG"),v=e("bTqV"),w=e("sYmb"),_=function(t){return{"shake-it":t}},x=function(t,n){return{"inline-block":t,hidden:n}},y=function(t,n){return{hidden:t,block:n}},O=[{path:"",component:(r=function(){function t(n,e,r,a,o,i){_classCallCheck(this,t),this._changeDetectorRef=n,this._formBuilder=e,this._router=r,this._authenticationService=a,this._store=o,this._snackBar=i,this.routeAnimationsElements=m.c,this.loading=!1,this.loginError=null}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.loginForm=this._formBuilder.group({name:["",l.r.required],password:["",l.r.required]}),t.t0=this._authenticationService.currentUserValue,!t.t0){t.next=5;break}return t.next=5,this._router.navigate(["shows"]);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"onSubmit",value:function(){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loginForm.invalid||(this.startLoadingIndicator(),this._authenticationService.login(this.formLoginInput.name.value,this.formLoginInput.password.value).pipe(Object(b.a)()).subscribe((function(t){n._store.dispatch(Object(m.d)()),localStorage.setItem("accessToken",JSON.stringify(t.data.adminSignIn.accessToken)),localStorage.setItem("refreshToken",JSON.stringify(t.data.adminSignIn.refreshToken)),n._router.navigate(["shows"]),n.stopLoadingIndicator(null)}),(function(t){var e;console.log(t);var r=(null===(e=t)||void 0===e?void 0:e.graphQLErrors[0].message)||"Unknown server error";n.errorMessage(r),n.stopLoadingIndicator(r)})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"startLoadingIndicator",value:function(){this.loading=!0,this.loginError=null,this._changeDetectorRef.detectChanges()}},{key:"stopLoadingIndicator",value:function(t){this.loading=!1,this.loginError=t,this._changeDetectorRef.detectChanges()}},{key:"errorMessage",value:function(t){this._snackBar.open(t,"",{panelClass:["mat-toolbar","mat-warn"]})}},{key:"formLoginInput",get:function(){return this.loginForm.controls}}]),t}(),r.\u0275fac=function(t){return new(t||r)(u.Qb(u.h),u.Qb(l.d),u.Qb(s.h),u.Qb(d.a),u.Qb(g.h),u.Qb(p.b))},r.\u0275cmp=u.Kb({type:r,selectors:[["anms-login"]],decls:28,vars:32,consts:[[1,"background"],[1,"gradient"],[1,"container"],[3,"ngClass"],["autocomplete","off",3,"formGroup","ngClass","ngSubmit"],[1,"loading-indicator-container",3,"ngClass"],[1,"loading-indicator"],[1,"full-width-input"],["matInput","","formControlName","name",3,"placeholder"],["matInput","","type","password","formControlName","password",3,"placeholder"],["mat-raised-button","","type","submit","color","primary",3,"disabled"]],template:function(t,n){1&t&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Vb(2,"div",2),u.Vb(3,"mat-card",3),u.Vb(4,"mat-card-content"),u.Vb(5,"form",4),u.dc("ngSubmit",(function(t){return n.onSubmit()})),u.Vb(6,"h1"),u.Dc(7),u.ic(8,"translate"),u.Ub(),u.Vb(9,"div",5),u.Rb(10,"mat-spinner",6),u.Ub(),u.Vb(11,"div",3),u.Vb(12,"mat-form-field",7),u.Rb(13,"input",8),u.ic(14,"translate"),u.Vb(15,"mat-error"),u.Dc(16),u.ic(17,"translate"),u.Ub(),u.Ub(),u.Vb(18,"mat-form-field",7),u.Rb(19,"input",9),u.ic(20,"translate"),u.Vb(21,"mat-error"),u.Dc(22),u.ic(23,"translate"),u.Ub(),u.Ub(),u.Vb(24,"mat-card-actions"),u.Vb(25,"button",10),u.Dc(26),u.ic(27,"translate"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub()),2&t&&(u.Cb(3),u.mc("ngClass",u.pc(24,_,n.loginError)),u.Cb(2),u.mc("formGroup",n.loginForm)("ngClass",n.routeAnimationsElements),u.Cb(2),u.Ec(u.jc(8,12,"anms.login.title")),u.Cb(2),u.mc("ngClass",u.qc(26,x,n.loading,!n.loading)),u.Cb(2),u.mc("ngClass",u.qc(29,y,n.loading,!n.loading)),u.Cb(2),u.mc("placeholder",u.jc(14,14,"anms.login.name")),u.Cb(3),u.Ec(u.jc(17,16,"anms.login.invalid-name")),u.Cb(3),u.mc("placeholder",u.jc(20,18,"anms.login.password")),u.Cb(3),u.Ec(u.jc(23,20,"anms.login.invalid-password")),u.Cb(3),u.mc("disabled",n.loading||n.loginForm.invalid),u.Cb(1),u.Fc(" ",u.jc(27,22,"anms.login.login-button")," "))},directives:[f.a,o.i,f.c,l.s,l.m,l.g,h.b,k.b,C.b,l.b,l.l,l.f,k.a,f.b,v.a],pipes:[w.c],styles:['.background[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;width:100%;height:88vh;position:relative}.background[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:400px;margin:2em auto;text-align:center}.background[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;margin-bottom:1em}.background[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:.3em;margin-bottom:.6em}.background[_ngcontent-%COMP%]:before{top:0;background:url(intro.f4e64f141d1a6a44b226.jpg) no-repeat top;background-size:cover;opacity:.7}.background[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%]:before, .background[_ngcontent-%COMP%]:before{position:absolute;left:0;bottom:0;right:0;content:"";z-index:0}.background[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%]:before{top:51%}.background[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative}.shake-it[_ngcontent-%COMP%]{-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000px;perspective:1000px}@-webkit-keyframes shake{10%,90%{-webkit-transform:translate3d(-12px,0,0);transform:translate3d(-12px,0,0)}20%,80%{-webkit-transform:translate3d(12px,0,0);transform:translate3d(12px,0,0)}30%,50%,70%{-webkit-transform:translate3d(-12px,0,0);transform:translate3d(-12px,0,0)}40%,60%{-webkit-transform:translate3d(12px,0,0);transform:translate3d(12px,0,0)}}@keyframes shake{10%,90%{-webkit-transform:translate3d(-12px,0,0);transform:translate3d(-12px,0,0)}20%,80%{-webkit-transform:translate3d(12px,0,0);transform:translate3d(12px,0,0)}30%,50%,70%{-webkit-transform:translate3d(-12px,0,0);transform:translate3d(-12px,0,0)}40%,60%{-webkit-transform:translate3d(12px,0,0);transform:translate3d(12px,0,0)}}.loading-indicator-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.loading-indicator[_ngcontent-%COMP%]{margin:3.7em}input.internal-autofill-selected[_ngcontent-%COMP%]{background-color:transparent}.hidden[_ngcontent-%COMP%]{display:none}.block[_ngcontent-%COMP%]{display:block}.inline-block[_ngcontent-%COMP%]{display:inline-block}'],changeDetection:0}),r),data:{title:"anms.menu.login"}}],P=((a=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:a}),a.\u0275inj=u.Nb({factory:function(t){return new(t||a)},imports:[[s.l.forChild(O)],s.l]}),a);e.d(n,"LoginModule",(function(){return V}));var M,V=((M=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:M}),M.\u0275inj=u.Nb({factory:function(t){return new(t||M)},imports:[[o.c,i.a,P]]}),M)}}]);